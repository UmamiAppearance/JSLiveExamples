var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism$1=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,o={},a={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof r?new r(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,r;switch(n=n||{},a.util.type(t)){case"Object":if(r=a.util.objId(t),n[r])return n[r];for(var s in o={},n[r]=o,t)t.hasOwnProperty(s)&&(o[s]=e(t[s],n));return o;case"Array":return r=a.util.objId(t),n[r]?n[r]:(o=[],n[r]=o,t.forEach((function(t,a){o[a]=e(t,n)})),o);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(o){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(o.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var o="no-"+t;e;){var a=e.classList;if(a.contains(t))return!0;if(a.contains(o))return!1;e=e.parentElement}return!!n}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(e,t){var n=a.util.clone(a.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var r=(o=o||a.languages)[e],s={};for(var i in r)if(r.hasOwnProperty(i)){if(i==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(i)||(s[i]=r[i])}var c=o[e];return o[e]=s,a.languages.DFS(a.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,o,r){r=r||{};var s=a.util.objId;for(var i in t)if(t.hasOwnProperty(i)){n.call(t,i,t[i],o||i);var l=t[i],c=a.util.type(l);"Object"!==c||r[s(l)]?"Array"!==c||r[s(l)]||(r[s(l)]=!0,e(l,n,i,r)):(r[s(l)]=!0,e(l,n,null,r))}}},plugins:{},highlightAll:function(e,t){a.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",o),o.elements=Array.prototype.slice.apply(o.container.querySelectorAll(o.selector)),a.hooks.run("before-all-elements-highlight",o);for(var r,s=0;r=o.elements[s++];)a.highlightElement(r,!0===t,o.callback)},highlightElement:function(t,n,o){var r=a.util.getLanguage(t),s=a.languages[r];a.util.setLanguage(t,r);var i=t.parentElement;i&&"pre"===i.nodeName.toLowerCase()&&a.util.setLanguage(i,r);var l={element:t,language:r,grammar:s,code:t.textContent};function c(e){l.highlightedCode=e,a.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,a.hooks.run("after-highlight",l),a.hooks.run("complete",l),o&&o.call(l.element)}if(a.hooks.run("before-sanity-check",l),(i=l.element.parentElement)&&"pre"===i.nodeName.toLowerCase()&&!i.hasAttribute("tabindex")&&i.setAttribute("tabindex","0"),!l.code)return a.hooks.run("complete",l),void(o&&o.call(l.element));if(a.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var d=new Worker(a.filename);d.onmessage=function(e){c(e.data)},d.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(a.highlight(l.code,l.grammar,l.language));else c(a.util.encode(l.code))},highlight:function(e,t,n){var o={code:e,grammar:t,language:n};if(a.hooks.run("before-tokenize",o),!o.grammar)throw new Error('The language "'+o.language+'" has no grammar.');return o.tokens=a.tokenize(o.code,o.grammar),a.hooks.run("after-tokenize",o),r.stringify(a.util.encode(o.tokens),o.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var o in n)t[o]=n[o];delete t.rest}var a=new l;return c(a,a.head,e),i(e,a,t,a.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(a)},hooks:{all:{},add:function(e,t){var n=a.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=a.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}},Token:r};function r(e,t,n,o){this.type=e,this.content=t,this.alias=n,this.length=0|(o||"").length}function s(e,t,n,o){e.lastIndex=t;var a=e.exec(n);if(a&&o&&a[1]){var r=a[1].length;a.index+=r,a[0]=a[0].slice(r)}return a}function i(e,t,n,o,l,p){for(var u in n)if(n.hasOwnProperty(u)&&n[u]){var h=n[u];h=Array.isArray(h)?h:[h];for(var m=0;m<h.length;++m){if(p&&p.cause==u+","+m)return;var g=h[m],f=g.inside,b=!!g.lookbehind,k=!!g.greedy,y=g.alias;if(k&&!g.pattern.global){var v=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,v+"g")}for(var w=g.pattern||g,x=o.next,E=l;x!==t.tail&&!(p&&E>=p.reach);E+=x.value.length,x=x.next){var S=x.value;if(t.length>e.length)return;if(!(S instanceof r)){var F,C=1;if(k){if(!(F=s(w,E,e,b))||F.index>=e.length)break;var L=F.index,$=F.index+F[0].length,N=E;for(N+=x.value.length;L>=N;)N+=(x=x.next).value.length;if(E=N-=x.value.length,x.value instanceof r)continue;for(var A=x;A!==t.tail&&(N<$||"string"==typeof A.value);A=A.next)C++,N+=A.value.length;C--,S=e.slice(E,N),F.index-=E}else if(!(F=s(w,0,S,b)))continue;L=F.index;var j=F[0],T=S.slice(0,L),O=S.slice(L+j.length),P=E+S.length;p&&P>p.reach&&(p.reach=P);var B=x.prev;if(T&&(B=c(t,B,T),E+=T.length),d(t,B,C),x=c(t,B,new r(u,f?a.tokenize(j,f):j,y,j)),O&&c(t,x,O),C>1){var D={cause:u+","+m,reach:P};i(e,t,n,x.prev,E,D),p&&D.reach>p.reach&&(p.reach=D.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var o=t.next,a={value:n,prev:t,next:o};return t.next=a,o.prev=a,e.length++,a}function d(e,t,n){for(var o=t.next,a=0;a<n&&o!==e.tail;a++)o=o.next;t.next=o,o.prev=t,e.length-=a}if(e.Prism=a,r.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var o="";return t.forEach((function(t){o+=e(t,n)})),o}var r={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},s=t.alias;s&&(Array.isArray(s)?Array.prototype.push.apply(r.classes,s):r.classes.push(s)),a.hooks.run("wrap",r);var i="";for(var l in r.attributes)i+=" "+l+'="'+(r.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+i+">"+r.content+"</"+r.tag+">"},!e.document)return e.addEventListener?(a.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,r=n.code,s=n.immediateClose;e.postMessage(a.highlight(r,a.languages[o],o)),s&&e.close()}),!1),a):a;var p=a.util.currentScript();function u(){a.manual||a.highlightAll()}if(p&&(a.filename=p.src,p.hasAttribute("data-manual")&&(a.manual=!0)),!a.manual){var h=document.readyState;"loading"===h||"interactive"===h&&p&&p.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return a}(_self);
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */"undefined"!=typeof module&&module.exports&&(module.exports=Prism$1),"undefined"!=typeof global&&(global.Prism=Prism$1),Prism$1.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism$1.languages.javascript=Prism$1.languages.extend("clike",{"class-name":[Prism$1.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism$1.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism$1.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism$1.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism$1.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism$1.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism$1.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism$1.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism$1.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism$1.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism$1.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism$1.languages.markup&&(Prism$1.languages.markup.tag.addInlined("script","javascript"),Prism$1.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism$1.languages.js=Prism$1.languages.javascript;const globalWindow=window;function CodeJar(e,t,n={}){const o=Object.assign({tab:"\t",indentOn:/[({\[]$/,moveToNewLine:/^[)}\]]/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:globalWindow},n),a=o.window,r=a.document;let s,i,l=[],c=[],d=-1,p=!1;e.setAttribute("contenteditable","plaintext-only"),e.setAttribute("spellcheck",o.spellcheck?"true":"false"),e.style.outline="none",e.style.overflowWrap="break-word",e.style.overflowY="auto",e.style.whiteSpace="pre-wrap";let u=!1;t(e),"plaintext-only"!==e.contentEditable&&(u=!0),u&&e.setAttribute("contenteditable","true");const h=N((()=>{const n=k();t(e,n),y(n)}),30);let m=!1;const g=e=>!C(e)&&!L(e)&&"Meta"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&!e.key.startsWith("Arrow"),f=N((e=>{g(e)&&(E(),m=!1)}),300),b=(t,n)=>{l.push([t,n]),e.addEventListener(t,n)};function k(){const t=O(),n={start:0,end:0,dir:void 0};let{anchorNode:o,anchorOffset:a,focusNode:s,focusOffset:i}=t;if(!o||!s)throw"error1";if(o.nodeType===Node.ELEMENT_NODE){const e=r.createTextNode("");o.insertBefore(e,o.childNodes[a]),o=e,a=0}if(s.nodeType===Node.ELEMENT_NODE){const e=r.createTextNode("");s.insertBefore(e,s.childNodes[i]),s=e,i=0}return S(e,(e=>{if(e===o&&e===s)return n.start+=a,n.end+=i,n.dir=a<=i?"->":"<-","stop";if(e===o){if(n.start+=a,n.dir)return"stop";n.dir="->"}else if(e===s){if(n.end+=i,n.dir)return"stop";n.dir="<-"}e.nodeType===Node.TEXT_NODE&&("->"!=n.dir&&(n.start+=e.nodeValue.length),"<-"!=n.dir&&(n.end+=e.nodeValue.length))})),e.normalize(),n}function y(t){const n=O();let o,a,r=0,s=0;if(t.dir||(t.dir="->"),t.start<0&&(t.start=0),t.end<0&&(t.end=0),"<-"==t.dir){const{start:e,end:n}=t;t.start=n,t.end=e}let i=0;S(e,(e=>{if(e.nodeType!==Node.TEXT_NODE)return;const n=(e.nodeValue||"").length;if(i+n>t.start&&(o||(o=e,r=t.start-i),i+n>t.end))return a=e,s=t.end-i,"stop";i+=n})),o||(o=e,r=e.childNodes.length),a||(a=e,s=e.childNodes.length),"<-"==t.dir&&([o,r,a,s]=[a,s,o,r]),n.setBaseAndExtent(o,r,a,s)}function v(){const t=O().getRangeAt(0),n=r.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function w(){const t=O().getRangeAt(0),n=r.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function x(e){if(u&&"Enter"===e.key)if(T(e),e.stopPropagation(),""==w()){$("\n ");const e=k();e.start=--e.end,y(e)}else $("\n")}function E(){if(!p)return;const t=e.innerHTML,n=k(),o=c[d];if(o&&o.html===t&&o.pos.start===n.start&&o.pos.end===n.end)return;d++,c[d]={html:t,pos:n},c.splice(d+1);d>300&&(d=300,c.splice(0,1))}function S(e,t){const n=[];e.firstChild&&n.push(e.firstChild);let o=n.pop();for(;o&&"stop"!==t(o);)o.nextSibling&&n.push(o.nextSibling),o.firstChild&&n.push(o.firstChild),o=n.pop()}function F(e){return e.metaKey||e.ctrlKey}function C(e){return F(e)&&!e.shiftKey&&"KeyZ"===e.code}function L(e){return F(e)&&e.shiftKey&&"KeyZ"===e.code}function $(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),r.execCommand("insertHTML",!1,e)}function N(e,t){let n=0;return(...o)=>{clearTimeout(n),n=a.setTimeout((()=>e(...o)),t)}}function A(e){let t=e.length-1;for(;t>=0&&"\n"!==e[t];)t--;t++;let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n)||"",t,n]}function j(){return e.textContent||""}function T(e){e.preventDefault()}function O(){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.getSelection():a.getSelection()}return b("keydown",(t=>{t.defaultPrevented||(i=j(),o.preserveIdent?function(e){if("Enter"===e.key){const t=v(),n=w();let[a]=A(t),r=a;if(o.indentOn.test(t)&&(r+=o.tab),r.length>0?(T(e),e.stopPropagation(),$("\n"+r)):x(e),r!==a&&o.moveToNewLine.test(n)){const e=k();$("\n"+a),y(e)}}}(t):x(t),o.catchTab&&function(e){if("Tab"===e.key)if(T(e),e.shiftKey){const e=v();let[t,n]=A(e);if(t.length>0){const e=k(),a=Math.min(o.tab.length,t.length);y({start:n,end:n+a}),r.execCommand("delete"),e.start-=a,e.end-=a,y(e)}}else $(o.tab)}(t),o.addClosing&&function(e){const t="([{'\"",n=")]}'\"",o=w(),a=v(),r="\\"===a.substr(a.length-1),s=o.substr(0,1);if(n.includes(e.key)&&!r&&s===e.key){const t=k();T(e),t.start=++t.end,y(t)}else if(t.includes(e.key)&&!r&&("\"'".includes(e.key)||[""," ","\n"].includes(s))){T(e);const o=k(),a=o.start==o.end?"":O().toString();$(e.key+a+n[t.indexOf(e.key)]),o.start++,o.end++,y(o)}}(t),o.history&&(!function(t){if(C(t)){T(t),d--;const n=c[d];n&&(e.innerHTML=n.html,y(n.pos)),d<0&&(d=0)}if(L(t)){T(t),d++;const n=c[d];n&&(e.innerHTML=n.html,y(n.pos)),d>=c.length&&d--}}(t),g(t)&&!m&&(E(),m=!0)),u&&y(k()))})),b("keyup",(e=>{e.defaultPrevented||e.isComposing||(i!==j()&&h(),f(e),s&&s(j()))})),b("focus",(e=>{p=!0})),b("blur",(e=>{p=!1})),b("paste",(n=>{E(),function(n){T(n);const o=(n.originalEvent||n).clipboardData.getData("text/plain").replace(/\r/g,""),a=k();$(o),t(e),y({start:Math.min(a.start,a.end)+o.length,end:Math.min(a.start,a.end)+o.length,dir:"<-"})}(n),E(),s&&s(j())})),{updateOptions(e){Object.assign(o,e)},updateCode(n){e.textContent=n,t(e)},onUpdate(e){s=e},toString:j,save:k,restore:y,recordHistory:E,destroy(){for(let[t,n]of l)e.removeEventListener(t,n)}}}const isPositiveInteger=e=>(e=Number(e),!isNaN(e)&&(Number.isInteger(e)&&e>0)),isIdentifier=e=>{const t=e.match(new RegExp("^[A-Z_a-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ][A-Z_a-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ0-9̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ംഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏ᦰ-ᧀᧈᧉ᧐-᧙ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᷀-ᷦ᷼-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︦︳︴﹍-﹏０-９＿]*$"));return Boolean(t)};
/**
 * [contodo]{@link https://github.com/UmamiAppearance/contodo}
 *
 * @version 0.2.0
 * @author UmamiAppearance [mail@umamiappearance.eu]
 * @license GPL-3.0
 */
class ConTodo{constructor(e,t={}){this.parentNode=e||document.body;const n=e=>Object.prototype.hasOwnProperty.call(t,e);this.options={autostart:!n("autostart")||Boolean(t.autostart),catchErrors:!!n("catchErrors")&&Boolean(t.catchErrors),height:n("height")?t.height:"inherit",maxEntries:n("maxEntries")?Math.max(parseInt(Number(t.maxEntries),10),0):0,preventDefault:!!n("preventDefault")&&Boolean(t.preventDefault),reversed:!!n("reversed")&&Boolean(t.reversed),showDebugging:!n("showDebugging")||Boolean(t.showDebugging),showTimestamp:!!n("showTimestamp")&&Boolean(t.showTimestamp),width:n("width")?t.width:"inherit"},"string"==typeof defaultCSS?this.options.applyCSS=!n("applyCSS")||Boolean(t.applyCSS):(n("applyCSS")&&console.warn("Build css is not available. Option 'applyCSS' was ignored."),this.options.applyCSS=!1),this.defaultConsole={assert:console.assert.bind(console),count:console.count.bind(console),countReset:console.countReset.bind(console),clear:console.clear.bind(console),debug:console.debug.bind(console),error:console.error.bind(console),exception:console.exception?console.exception.bind(console):null,info:console.info.bind(console),log:console.log.bind(console),table:console.table.bind(console),time:console.time.bind(console),timeEnd:console.timeEnd.bind(console),timeLog:console.timeLog.bind(console),trace:console.trace.bind(console),warn:console.warn.bind(console)},this.active=!1,this.counters=new Object,this.mainElem=null,this.style=null,this.timers=new Object,this.catchErrorFN=this.catchErrorFN.bind(this),this.options.autostart&&(this.createDocumentNode(),this.initFunctions())}createDocumentNode(){this.mainElem||(this.mainElem=document.createElement("code"),this.parentNode.append(this.mainElem),this.mainElem.classList.add("contodo"),this.mainElem.style.height=this.options.height,this.logCount=0),this.options.applyCSS&&this.applyCSS()}destroyDocumentNode(){this.active&&this.restoreDefaultConsole(),this.mainElem&&(this.mainElem.remove(),this.mainElem=null)}initFunctions(){this.active||(console.assert=(e,...t)=>this.assert(e,t),console.count=e=>this.count(e),console.countReset=e=>this.countReset(e),console.counters=()=>this.countersShow(),console.clear=()=>this.clear(),console.debug=(...e)=>this.debug(e),console.error=(...e)=>this.makeLog("error",e),console.exception=console.error,console.info=(...e)=>this.makeLog("info",e),console.log=(...e)=>this.makeLog("log",e),console.table=(...e)=>this.makeTableLog(e),console.time=e=>this.time(e),console.timeEnd=e=>this.timeEnd(e),console.timeLog=e=>this.timeLog(e),console.timers=()=>this.timersShow(),console.trace=(...e)=>this.trace(e),console.warn=(...e)=>this.makeLog("warn",e),this.options.catchErrors&&window.addEventListener("error",this.catchErrorFN,!1),this.active=!0)}restoreDefaultConsole(){this.active&&(console.assert=this.defaultConsole.assert,console.count=this.defaultConsole.count,console.countReset=this.defaultConsole.countReset,delete console.counters,console.clear=this.defaultConsole.clear,console.debug=this.defaultConsole.debug,console.error=this.defaultConsole.error,console.exception=this.defaultConsole.exception,console.info=this.defaultConsole.info,console.log=this.defaultConsole.log,console.table=this.defaultConsole.table,console.time=this.defaultConsole.time,console.timeEnd=this.defaultConsole.timeEnd,console.timeLog=this.defaultConsole.timeLog,delete console.timers,console.trace=this.defaultConsole.trace,console.warn=this.defaultConsole.warn,this.options.catchErrors&&window.removeEventListener("error",this.catchErrorFN,!1),this.active=!1)}catchErrorFN(e){this.makeLog("error",["Uncaught",e.message,"\n",`  > ${e.filename}`,"\n",`  > line ${e.lineno}, colum ${e.colno}`],!0)}applyCSS(){this.style||(this.style=document.createElement("style"),this.style.append(document.createTextNode(defaultCSS)),document.head.append(this.style))}removeCSS(){this.style&&(this.style.remove(),this.style=null)}makeLog(e,t,n=this.options.preventDefault){const o={error:"⛔",info:"ⓘ",warn:"⚠️"};n||this.defaultConsole[e](...t);const a=this.#e(e),r=t.length-1;"log"===e&&r<0?this.#t(a):"log"!==e&&(a.append(this.#n("info",o[e])),this.#t(a)),t.forEach(((e,t)=>{this.#o(e,a),t!==r&&this.#t(a)})),this.#a()}makeTableLog(e,t=this.options.preventDefault){t||this.defaultConsole.table(...e);const n=e=>"object"==typeof e||Symbol.iterator in Object(e)&&"string"!=typeof e;let o,a;if([o,a]=e,n(o)){if("object"!=typeof o&&(o=Object.assign({},o)),!a){const e=new Set;for(let t in o){let a=o[t];n(a)||(a=[a]);const r="object"!=typeof a?Object.assign({},a):a;for(const t in r)e.add(t)}a=[...e]}let e;e=1===a.length&&0==a[0]?["(Index)","Value"]:["(Index)",...a];const t=[];for(const e in o){let r=o[e];n(r)||(r=[r]);const s="object"!=typeof r?Object.assign({},r):r,i=[e];for(const e of a){const t=s[e];i.push(void 0===t?"":t)}t.push(i)}this.#r(t,e)}else{const e=void 0===o?[]:[o];this.makeLog("log",e,!0)}}#e(e="log"){let t=document.createElement("div");t.classList.add("log",e);const n=(new Date).toISOString();this.options.showTimestamp&&(t.append(this.#n("time",n)),t.append("\n")),t.dataset.date=n,this.logCount++;let o=!1;return this.options.maxEntries&&this.logCount>this.options.maxEntries&&(o=!0),this.options.reversed?(o&&this.mainElem.childNodes[this.options.maxEntries-1].remove(),this.mainElem.prepend(t)):(o&&this.mainElem.childNodes[0].remove(),this.mainElem.append(t)),t}#n(e,t){const n=document.createElement("span");return n.classList.add(e),n.textContent=t,n}#t(e,t=1){e.append(this.#n("space"," ".repeat(t)))}#s(e){console.error("You found an edge case, which is not covered yet.\nPlease create an issue mentioning your input at:\nhttps://github.com/UmamiAppearance/contodo/issues"),this.defaultConsole.warn(e)}#o(e,t){let n=typeof e;if("object"===n)if(Array.isArray(e)||ArrayBuffer.isView(e)&&e.constructor.name.match("Array")){const n=e.length-1;t.append(this.#n("object",`${e.constructor.name} [ `)),e.forEach(((e,o)=>{let a=typeof e;"string"===a?(e=`"${e}"`,a="array-string",t.append(this.#n(a,e))):this.#o(e,t),o<n&&t.append(this.#n("object",", "))})),t.append(this.#n("object"," ]"))}else if(ArrayBuffer.isView(e))t.append(this.#n("object","DataView { buffer: ArrayBuffer, byteLength: ")),t.append(this.#n("number",e.byteLength)),t.append(this.#n("object",", byteOffset: ")),t.append(this.#n("number",e.byteOffset)),t.append(this.#n("object"," }"));else if(null===e)t.append(this.#n("null","null"));else if("ArrayBuffer"===e.constructor.name)t.append(this.#n("object","ArrayBuffer { byteLength: ")),t.append(this.#n("number",e.byteLength)),t.append(this.#n("object"," }"));else if(e===Object(e)){t.append(this.#n("object","Object { "));const n=Object.entries(e),o=n.length-1;n.forEach(((e,n)=>{e.forEach(((e,n)=>{let o=typeof e;const a=!n;"string"===o?(a?(o="object",isPositiveInteger(e)?e=Number(e):isIdentifier(e)||(e=`"${e}"`)):(e=`"${e}"`,o="array-string"),t.append(this.#n(o,e))):this.#o(e,t),a&&(t.append(this.#n("object",":")),this.#t(t))})),n<o&&(t.append(this.#n("object",",")),this.#t(t))})),t.append(this.#n("object"," }"))}else this.#s(e);else if("function"===n){let n=Function.toString.call(e);const o=Boolean(n.match(/^class/));let a,r=!0;n.match("=>")?a=n.replace(/\s+/g,"").replace(/=>.*/,"").replace(/(\(|\))/g,"").split(",").filter(Boolean):o&&!n.match("constructor")?(r=!1,a=[]):a=n.replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^/*]*\*\//g,"").split("){",1)[0].replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean);const s=a.join(", ");o?r?(t.append(this.#n("function",`class ${e.name} { constructor(`)),t.append(this.#n("fn-args",s)),t.append(this.#n("function",") }"))):t.append(this.#n("function",`class ${e.name} {}`)):(t.append(this.#n("function",`function ${e.name}(`)),t.append(this.#n("fn-args",s)),t.append(this.#n("function",")")))}else"undefined"===n?t.append(this.#n("null","undefined")):("string"===n?""===e&&(e="<empty string>"):"bigint"===n?e+="n":"symbol"===n?e=e.toString().replace("(",'("').replace(")",'")'):isNaN(e)&&(n="null"),t.append(this.#n(n,e)))}#r(e,t){const n=document.createElement("table"),o=document.createElement("thead"),a=document.createElement("tr");for(const e of t){const t=document.createElement("th");t.append(document.createTextNode(e)),a.append(t)}o.append(a),n.append(o);const r=document.createElement("tbody");for(const t of e){const e=document.createElement("tr");for(const n of t){const t=document.createElement("td");t.append(document.createTextNode(n)),e.append(t)}r.append(e)}n.append(r),this.#e().append(n),this.#a()}#i(e){return e=void 0===e?"default":String(e)}#a(){this.options.reversed?this.mainElem.scrollTop=0:this.mainElem.scrollTop=this.mainElem.scrollHeight}assert(e,t){this.options.preventDefault||this.defaultConsole.assert(e,...t),e||this.makeLog("error",["Assertion failed:",...t],!0)}count(e){e=this.#i(e),this.counters[e]?this.counters[e]++:this.counters[e]=1,this.makeLog("log",[`${e}: ${this.counters[e]}`])}countReset(e){if(e=this.#i(e),Object.prototype.hasOwnProperty.call(this.counters,e))this.counters[e]=0,this.makeLog("log",[`${e}: ${this.counters[e]}`]);else{const t=`Count for '${e}' does not exist`;this.makeLog("warn",[t])}}countersShow(){Object.keys(this.counters).length&&this.makeTableLog([this.counters])}clear(e=!0){!this.options.preventDefault&&e&&this.defaultConsole.clear(),this.mainElem.innerHTML="",this.logCount=0,e&&this.makeLog("log",["Console was cleared"],!0)}debug(e){this.options.preventDefault||this.defaultConsole.debug(...e),this.options.showDebugging&&this.makeLog("log",e,!0)}time(e){const t=window.performance.now();if(e=this.#i(e),this.timers[e]){const t=`Timer '${e}' already exists`;this.makeLog("warn",[t],!0),this.options.preventDefault||this.defaultConsole.warn(t)}else this.timers[e]=t}#l(e){const t=window.performance.now();e=this.#i(e);const n=t-this.timers[e];let o,a;return this.timers[e]?(o=`${e}: ${n} ms`,a="log"):(o=`Timer '${e}' does not exist`,a="warn"),this.makeLog(a,[o],!0),this.options.preventDefault||this.defaultConsole[a](o),e}timeEnd(e){e=this.#l(e),delete this.timers[e]}timeLog(e){this.#l(e)}timersShow(){const e=window.performance.now(),t=new Object;for(const n in this.timers)t[n]=e-this.timers[n]+" ms";Object.keys(t).length&&this.makeTableLog([t])}trace(e){let t;try{throw new Error}catch(e){t=e.stack}const n=[];let o=!1,a=0;t.split("\n").slice(0,-1).forEach((e=>{if(!o&&e.match("console.trace"))o=!0;else if(o){let t,o;[t,o]=e.split("@"),t||(t="(anonymous)");const r=t.length;a=Math.max(a,r),n.push({name:t,file:o,len:r})}})),a++;const r=this.#e();r.append(this.#n("trace-head","console.trace()"));for(const t of e)this.#t(r),this.#o(t,r);r.append("\n");for(const e of n)this.#t(r),r.append(this.#n("trace-name",e.name)),this.#t(r,a-e.len),r.append(this.#n("trace-file",e.file)),r.append("\n");if(this.#a(),!this.options.preventDefault){const t=["%cconsole.trace()","color:magenta;",...e,"\n"];for(const e of n)t.push(`  ${e.name}${" ".repeat(a-e.len)}${e.file}\n`);this.defaultConsole.log(...t)}}}var mainCSS=".contodo{position:inherit;display:block;font-family:monospace;font-size:inherit;min-width:100px;min-height:100px;white-space:break-spaces;overflow:auto;margin:auto;color:#000;scroll-behavior:smooth}.contodo>.log{border-color:rgba(157,157,157,.2);border-width:0 0 1pt 0;border-style:solid;padding:2px 5px}.contodo>.log:first-child{border-width:1pt 0}.contodo>.warn{background-color:#ffff97bb}.contodo>.warn>span.string{color:#505000}.contodo>.error{background-color:#eeaeaebb}.contodo>.error>span.string{color:#640000}.contodo>.time{opacity:.5;font-size:80%}.contodo .null{color:grey}.contodo .bigint,.contodo .boolean,.contodo .number,.contodo .object{color:#32963c}.contodo .array-string,.contodo .fn-args,.contodo .symbol,.contodo .trace-head{color:#f0f}.contodo .function,.contodo .object,.contodo .trace-file{color:#2864fa}.contodo table{width:100%;text-align:left;border-spacing:0;border-collapse:collapse;border:2px #333;border-style:solid none;background-color:#fff}.contodo th,.contodo thead{font-weight:700}.contodo thead>tr,.contodo tr:nth-child(2n){background-color:rgba(200,200,220,.1)}.contodo td,.contodo th{padding:3px 0;border:1px solid rgba(157,157,157,.2);width:1%}div.live-example{font-size:14px;background-color:rgba(244,249,245,.5);min-width:340px;width:80%;margin:.5em auto;padding:.5em}.live-example>.code,.live-example>.contodo,.live-example>div.title-wrapper{border:3px dashed #005}.live-example>.code{min-height:160px;display:flex;flex-direction:row;justify-content:space-between;padding:.5em}.live-example>.code>ol{font-family:monospace;line-height:1.5em;margin:0;background-color:rgba(143,188,143,.7)}.live-example>.code>code{background-color:rgba(100,110,100,.025);padding:0 0 0 5px;display:block;font-size:inherit;white-space:pre!important;width:-webkit-fill-available;width:-moz-available;width:fill-available}.live-example .copy{min-width:26px;min-height:26px;margin:auto 0 0 -26px;background-image:url('data:image/svg+xml;charset=UTF-8,<svg focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"none\" stroke=\"dimgrey\" stroke-width=\"5\" d=\"m 37,30 v -7 c 0,-2.77 2.23,-5 5,-5 h 35 c 2.77,0 5,2.23 5,5 v 35 c 0,2.77 -2.23,5 -5,5 m 0,0 H 70 M 63,42 c 0,-2.77 -1.23,-5 -4,-5 H 23 c -2.77,0 -5,2.23 -5,5 v 35 c 0,2.77 2.23,5 5,5 h 35 c 2.77,0 5,-2.23 5,-5 z\"></path></svg>');background-repeat:no-repeat;background-size:contain;cursor:pointer}.live-example>.code,.live-example>.contodo{background-repeat:no-repeat;background-position:right 10px}.live-example>.code{background-image:url(\"data:image/svg+xml;utf-8,<svg height='120px' width='290px' xmlns='http://www.w3.org/2000/svg' viewBox='-115 0 100 100'><text y='1em' style='font-family: monospace; font-size: 1.2rem; fill: rgba(200, 200, 200, 0.6);'>code</text>\\</svg>\")}.live-example>.contodo{background-image:url(\"data:image/svg+xml;utf-8,<svg height='120px' width='290px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='1em' style='font-family: monospace; font-size: 1.2rem; fill: rgba(200, 200, 200, 0.6);'>console output</text></svg>\");background-color:transparent;padding:.5em}.live-example>div.title-wrapper{border-width:0 3px;display:flex;justify-content:space-between;padding:.5em}.live-example h1{font-size:1.4em;margin:auto 0}.live-example .controls{display:flex;flex-direction:row;flex-wrap:nowrap}.live-example button{font-weight:500;margin:0 5px;padding:.5em 1em;font-size:1.2em;background-color:rgba(143,188,143,.7);border:2px solid #005;cursor:pointer}.live-example button:hover{background-color:#8fbc8f}.live-example button:active{background-color:#315c31;box-shadow:inset 0 0 0 2px #324d32;color:#fffee0}section#le-copied{position:fixed;margin:auto;display:none;width:100%;text-align:center;top:40%;opacity:0}section#le-copied.show{display:block;animation:show 1.5s cubic-bezier(.8,.03,.58,1)}@keyframes show{50%{opacity:1}}#le-copied article{background-color:#778899;display:inline-block;padding:20px;color:#fff;font-weight:700;border-radius:6px;border:1px solid #d3d3d3;box-shadow:0 0 2px #ccc}@media screen and (max-width:768px){div.live-example{width:calc(100% - 1em)}.live-example h1{font-size:1.3em}.live-example button{padding:.4em .9em}}",prismCSS="code[class*=language-],pre[class*=language-]{color:#111b27;font-family:monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#800}.token.punctuation{color:#111b27}.token.delimiter.important,.token.selector .parent,.token.tag,.token.tag .token.punctuation{color:#006d6d}.token.attr-name,.token.boolean,.token.boolean.important,.token.constant,.token.number,.token.selector .token.attribute{color:#755f00}.token.class-name,.token.key,.token.parameter,.token.property,.token.property-access,.token.variable{color:#005a8e}.token.attr-value,.token.color,.token.inserted,.token.selector .token.value,.token.string,.token.string .token.url-link{color:#080}.token.builtin,.token.keyword-array,.token.package,.token.regex{color:#af00af}.token.function,.token.selector .token.class,.token.selector .token.id{color:#7c00aa}.token.atrule .token.rule,.token.combinator,.token.keyword,.token.operator,.token.pseudo-class,.token.pseudo-element,.token.selector,.token.unit{color:#008}.token.deleted,.token.important{color:#c22f2e}.token.keyword-this,.token.this{color:#005a8e}.token.bold,.token.important,.token.keyword-this,.token.this{font-weight:700}.token.delimiter.important{font-weight:inherit}.token.italic{font-style:italic}.token.entity{cursor:help}.language-markdown .token.title,.language-markdown .token.title .token.punctuation{color:#005a8e;font-weight:700}.language-markdown .token.blockquote.punctuation{color:#af00af}.language-markdown .token.code{color:#006d6d}.language-markdown .token.hr.punctuation{color:#005a8e}.language-markdown .token.url>.token.content{color:#116b00}.language-markdown .token.url-link{color:#755f00}.language-markdown .token.list.punctuation{color:#af00af}.language-markdown .token.table-header{color:#111b27}.language-json .token.operator{color:#111b27}.language-scss .token.variable{color:#006d6d}";
/**
 * [JSLiveExamples]{@link https://github.com/UmamiAppearance/JSLiveExamples}
 *
 * @version 0.1.0
 * @author UmamiAppearance [mail@umamiappearance.eu]
 * @license GPL-3.0
 */
const CSS=mainCSS+prismCSS;class LiveExample{constructor(e,t){const n=e.getAttribute("for")||`live-example-${t+1}`,o=e.getAttribute("class"),a=this.getTitle(e,t),r=this.getCode(e);if(!r)return null;const s=this.makeCodeExample(a,r);s.id=n,s.className=o,e.parentNode.insertBefore(s,e)}getTitle(e,t){const n=e.content.querySelector("h1");let o;return o=n?n.textContent:`Example #${t+1}`,o}getCode(e){const t=e.content.querySelector("script");if(!t)return console.warn("Every template needs a script tag with the code to display."),null;let n=t.innerHTML;const o=n.match(/\s*\n[\t\s]*/);return n=n.replace(new RegExp(o,"g"),"\n"),n.trim()}makeLineFN(e){let t=0;return n=>{const o=n.split("\n").length;if(o!==t){for(;o<t;)e.childNodes[o-1].remove(),t--;for(;o>t;)e.append(document.createElement("li")),t++}}}makeToClipboardFN(){return e=>{const t=e.target.previousSibling.textContent;window.navigator.clipboard.writeText(t);const n=document.querySelector("#le-copied");n.classList.add("show"),setTimeout((()=>{n.classList.remove("show")}),1500)}}makeCodeExample(title,code){const main=document.createElement("div"),codeWrapper=document.createElement("div");codeWrapper.className="code";const lineNumbers=document.createElement("ol"),codeNode=document.createElement("code");codeNode.className="language-js";const copyBtn=document.createElement("div");copyBtn.className="copy",copyBtn.title="copy to clipboard";const toClipboard=this.makeToClipboardFN();copyBtn.addEventListener("click",toClipboard,!1),codeWrapper.append(lineNumbers),codeWrapper.append(codeNode),codeWrapper.append(copyBtn);const titleWrapper=document.createElement("div");titleWrapper.className="title-wrapper";const titleNode=document.createElement("h1");titleNode.textContent=title;const controlsWrapper=document.createElement("div");controlsWrapper.className="controls";const resetBtn=document.createElement("button");resetBtn.textContent="reset";const executeBtn=document.createElement("button");executeBtn.textContent="run",controlsWrapper.append(resetBtn),controlsWrapper.append(executeBtn),titleWrapper.append(titleNode),titleWrapper.append(controlsWrapper);const updateLines=this.makeLineFN(lineNumbers),jar=CodeJar(codeNode,(e=>{Prism.highlightElement(e)}),{tab:" ".repeat(4)});jar.onUpdate(updateLines),updateLines(code),jar.updateCode(code),main.append(codeWrapper),main.append(titleWrapper);const contodo=new ConTodo(main,{autostart:!1,catchErrors:!0,height:"160px",preventDefault:!0});return contodo.createDocumentNode(),resetBtn.addEventListener("click",(()=>{contodo.clear(!1),jar.updateCode(code),updateLines(code)}),!1),executeBtn.addEventListener("click",(()=>{contodo.clear(!1),contodo.initFunctions(),eval(jar.toString()),contodo.restoreDefaultConsole()}),!1),main}}const liveExamples=(()=>{{const e=document.createElement("style");e.innerHTML=CSS,document.head.append(e)}const e=()=>{document.querySelectorAll("template.live-example").forEach(((e,t)=>{new LiveExample(e,t++)}));const e=document.createElement("section");e.id="le-copied";const t=document.createElement("article");t.textContent="copied to clipboard",e.append(t),document.body.append(e)};"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1)})();export{liveExamples as default};
